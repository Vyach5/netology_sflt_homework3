# Домашнее задание к занятию 3 SFLT "Резервное копирование" - `Шорохов Вячеслав`

---

### Задание 1

- Составьте команду rsync, которая позволяет создавать зеркальную копию домашней директории пользователя в директорию `/tmp/backup`
- Необходимо исключить из синхронизации все директории, начинающиеся с точки (скрытые)
- Необходимо сделать так, чтобы rsync подсчитывал хэш-суммы для всех файлов, даже если их время модификации и размер идентичны в источнике и приемнике.
- На проверку направить скриншот с командой и результатом ее выполнения

#### Решение:

Команда rsync:
```
rsync -acv --delete --exclude=".*" /home/vyach/hw_rsync /tmp/backup
```

`Результат работы команды:
![Скриншот 1](img/3.png)

---

### Задание 2

- Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.
- Резервная копия должна быть полностью зеркальной
- Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции
- Резервная копия размещается локально, в директории `/tmp/backup`
- На проверку направить файл crontab и скриншот с результатом работы утилиты.

#### Решение:

Команда rsync:
```
rsync -a --delete /home/vyach/hw_rsync /tmp/backup
```

Скрипт (logger делает запись в syslog, если rsync вернет код ошибки):
```
#!/bin/bash

rsync -a --delete /home/vyach/hw_rsync /tmp/backup

if [ $? != 0 ]
then
    logger script /home/vyach/hw_script.sh runtime error
fi
```

Строка crontab (сработка каждый день в 10 утра):
```
00 10 * * * /home/vyach/hw_script.sh
```

`Сообщения о ежеминутной сработке скрипта:
![Скриншот 2](img/1.png)

`Сообщение при удалении скрипта:
![Скриншот 3](img/2.png)

---
